# Blender担当者様へのVRMアバター改修依頼

## 🎯 依頼の背景

現在のMediaPipeシステムで、顔の**17個の詳細特徴量**を自動検出できるようになりました。しかし、現在のVRMファイルには対応するBlendShapeが不足しており、せっかく検出した特徴を活用できていません。

**より本人に近いアバターを自動生成するため、以下のBlendShapeの制作をお願いします。**

---

## 📊 現在検出できている特徴量（全17個）

### **基本寸法データ**
- 目の幅・高さ・縦横比
- 鼻の幅・高さ・立体感
- 口の幅・高さ・唇の厚み
- 顔の縦横比・両目の間隔

### **形状・角度データ（新規追加分）**
- **目の傾斜角度**: つり目 vs たれ目
- **眉の角度**: 上がり眉 vs 下がり眉  
- **眉の高さ**: 目との距離
- **顎の尖り具合**: シャープ vs 丸い
- **鼻の3D突出度**: 高い鼻筋 vs 低い鼻筋
- **頬のふくらみ**: ふっくら vs こけた頬

---

## 🎭 制作依頼BlendShape一覧

### **【高優先度】顔の印象を決定づける重要な特徴**

| BlendShape名 | 効果 | 検出条件 | 重要度 |
|-------------|------|---------|--------|
| `eyeSlantUp` | 目尻を上げる（つり目） | 目の傾斜角度 > 2° | ⭐⭐⭐ |
| `eyeSlantDown` | 目尻を下げる（たれ目） | 目の傾斜角度 < -2° | ⭐⭐⭐ |
| `browUp` | 眉尻を上げる（上がり眉） | 眉の角度が水平に近い | ⭐⭐⭐ |
| `browDown` | 眉尻を下げる（困り眉） | 眉の角度が-180°に近い | ⭐⭐⭐ |
| `jawSharp` | 顎先を尖らせる | 顎の尖り具合 > 0.7 | ⭐⭐⭐ |
| `jawRound` | 顎を丸くする | 顎の尖り具合 < 0.3 | ⭐⭐⭐ |

### **【中優先度】細かい個性を表現する特徴**

| BlendShape名 | 効果 | 検出条件 | 重要度 |
|-------------|------|---------|--------|
| `lipThick` | 唇を厚くする | 唇の厚み > 0.015 | ⭐⭐ |
| `lipThin` | 唇を薄くする | 唇の厚み < 0.008 | ⭐⭐ |
| `noseHigh` | 鼻を高く・立体的にする | 鼻の突出度 > 基準値 | ⭐⭐ |
| `noseLow` | 鼻を平坦にする | 鼻の突出度 < 基準値 | ⭐⭐ |
| `cheekPuff` | 頬を膨らませる | 頬のふくらみ > 基準値 | ⭐⭐ |
| `browHigh` | 眉を上に移動 | 眉の高さ > 基準値 | ⭐ |
| `browLow` | 眉を下に移動 | 眉の高さ < 基準値 | ⭐ |

---

## 🔧 技術仕様

### **対象ファイル**
- 現在のVRMファイル: `/public/vrm-models/f_0_20.vrm`
- 形式: VRM 1.0

### **BlendShape制御仕様**
- **値の範囲**: 0.0～1.0
- **制御方法**: プログラムから `expression.weight = 値` で自動適用
- **組み合わせ**: 複数のBlendShapeを同時適用可能

### **命名規則**
- 動詞形式（例: `eyeSlantUp`, `browDown`）
- キャメルケース
- 分かりやすい英語名

---

## 📈 実装効果の予想

### **現在の検出例（実際のテスト結果）**
```
目の傾斜角度: -0.38°     → eyeSlantDown を 4% 適用
眉の角度: -178.22°       → browDown を 50% 適用（困り眉）
顎の尖り具合: 0.252      → jawRound を 30% 適用（丸い顎）
唇の厚み: 0.0093         → lipThin を 25% 適用（薄い唇）
鼻の突出度: [新規検出]   → noseHighかnoseLowを適用
頬のふくらみ: [新規検出] → cheekPuffを適用
```

### **Before（現在）**
- 基本的な寸法のみ: noseWide, mouthWide, faceWide
- 結果: 「なんとなく似ている」レベル

### **After（実装後）**
- 寸法 + 形状・角度: 上記の全BlendShapeが適用
- 結果: **「かなり本人に近い」レベル**

---

## 💡 制作時のポイント

### **重要な注意事項**
1. **眉の角度**: -180°が水平、値が小さいほど下がり眉
2. **目の傾斜**: 正の値でつり目、負の値でたれ目
3. **顎の尖り具合**: 0に近いほど丸い、1に近いほどシャープ
4. **自然な変形**: 極端にならず、現実的な範囲での変形

### **優先順位**
1. **まず高優先度の6個**を制作してテスト
2. 効果を確認後、中優先度を追加制作

### **既存のBlendShapeとの協調**
現在利用中の以下とうまく組み合わせて動作するように：
- `eyeWide/Narrow`, `noseWide/Narrow`, `mouthWide/Narrow`, `faceWide/Narrow`

---

## 🚀 期待される成果

この改修により、MediaPipeで検出した顔特徴量を**100%活用**でき、アバターの再現精度が劇的に向上します。

- **つり目・たれ目の区別**
- **上がり眉・困り眉の表現**  
- **シャープ・丸い顎の再現**
- **鼻筋の高さ・唇の厚みの表現**

**人物の個性的な特徴を自動で再現できる、高精度アバター生成システムの完成**を目指しています。

---

## 📞 質問・相談

技術的な質問や、BlendShape制作に関する相談があれば、いつでもお声がけください。

よろしくお願いいたします！